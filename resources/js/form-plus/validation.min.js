if(jQuery().validate){jQuery.validator.addMethod('dotmail',function(value,element){return this.optional(element)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])+)+$/.test(value)},jQuery.validator.format("Please enter a valid email address."));jQuery.validator.addMethod('filesize',function(value,element,maxSize){if(this.optional(element)){return!0}
if(maxSize){maxSize=maxSize+'';switch(maxSize.charAt(maxSize.length-2).toLowerCase()){case 'k':maxSize=formsPlus.toNumber(maxSize.slice(0,maxSize.length-2))*1024;break;case 'm':maxSize=formsPlus.toNumber(maxSize.slice(0,maxSize.length-2))*Math.pow(1024,2);break;case 'g':maxSize=formsPlus.toNumber(maxSize.slice(0,maxSize.length-2))*Math.pow(1024,3);break;default:maxSize=formsPlus.toNumber(maxSize);break}}
return!maxSize||(element.files[0].size<=maxSize)},jQuery.validator.format("File size should be less than {0}."));jQuery.validator.addMethod("gtoday",function(value,element,format){if(this.optional(element)){return!0}
if(typeof(moment)==='undefined'){formsPlus.log(element.name+': please include moment.js!');return!0}
if(typeof(format)!=='string'){formsPlus.log(element.name+': wrong format!');return!0}
if(!value||!format){return!1}
var mDate=formsPlus.getMoment(value,format);return mDate?mDate.format(format)===value&&mDate.unix()>=moment(moment(Date()).format(format),format).unix():!1},jQuery.validator.format("Please enter valid date."));jQuery.validator.addMethod("ltoday",function(value,element,format){if(this.optional(element)){return!0}
if(typeof(moment)==='undefined'){formsPlus.log(element.name+': please include moment.js!');return!0}
if(typeof(format)!=='string'){formsPlus.log(element.name+': wrong format!');return!0}
if(!value||!format){return!1}
var mDate=formsPlus.getMoment(value,format);return mDate?mDate.format(format)===value&&mDate.unix()<=moment(moment(Date()).format(format),format).unix():!1},jQuery.validator.format("Please enter valid date."));jQuery.validator.addMethod("captcha",function(value,element){if(this.optional(element)){return!0}
var $el=jQuery(element),isValid=!1;if(jQuery().realperson){var rpHash=function(v){var h=5381;v=(v+'').toUpperCase();for(var i=0;i<v.length;i++){h=((h<<5)+h)+v.charCodeAt(i)}
return h};if(rpHash(value)===$el.realperson('getHash')){isValid=!0}}else if(value){isValid=!0}
return isValid},jQuery.validator.format("Please enter correct code."));jQuery.validator.addMethod("grouprequire",function(value,element,opts){var
$el=jQuery(element),$fields=!1,options=$el.data('grouprequireOptions');if(!options){if(typeof(opts)==='string'){options=opts.split(':');options={selector:'[data-rule-grouprequire="'+options[0]+'"], [data-rule-grouprequire^="'+options[0]+':"]',min:options.length>1&&options[1]?options[1]:1,max:options.length>2&&options[2]?options[2]:0,}}
$fields=jQuery(options.selector,element.form).data('grouprequireOptions',options)}else{$fields=jQuery(options.selector,element.form)}
var $fieldsFirst=$fields.eq(0),validator=($fieldsFirst.data("validSkip")?$fieldsFirst:$fieldsFirst.data("validSkip",jQuery.extend({},this))).data("validSkip"),count=$fields.filter(function(){var val,$element=jQuery(this),type=this.type;if(type==="radio"||type==="checkbox"){return $element.filter(":checked").val()}else if(type==="number"&&typeof this.validity!=="undefined"){return this.validity.badInput?!1:$element.val()}
val=$element.val();if(typeof val==="string"){return val.replace(/\r/g,"")}
return val}).length,isValid=!0;if(count<options.min||(options.max&&count>options.max)){isValid=!1}
$fieldsFirst=count=null;if(!$el.data("beingValidated")){if(validator.checkable(element)){$fields=$fields.not('[name="'+$el.attr('name')+'"]')}
$fields.data("beingValidated",!0);$fields.each(function(){validator.element(this)});$fields.data("beingValidated",!1)}
return isValid},jQuery.validator.format("Please fill some of these fields."));jQuery.fn.fpValidate=function(){if(!formsPlus.pluginCheck(this,"Forms Plus: validate - Nothing selected.")){return this}
var createStateMsg=function(){return jQuery('<span>').addClass('p-field-sub-text p-validation-state')};jQuery.each(this,function(i,$form){$form=jQuery($form);$form.validate({errorClass:'p-field-error',validClass:'p-field-valid',errorElement:'span',ignore:'.p-ignore-field, .p-ignore-hidden-field:hidden',highlight:function(element,errorClass,validClass){jQuery(element).closest(formsPlus.selectors.validationWrap).removeClass(validClass).addClass(errorClass)},unhighlight:function(element,errorClass,validClass){var
$element=jQuery(element),$wrap=$element.closest(formsPlus.selectors.validationWrap).removeClass(errorClass).addClass(validClass),$subtext=$wrap.find('.p-validation-state')||!1,$icon=$element.data('validIcon')?jQuery($element.data('validIcon')):!1;if($element.data('$fpValidationMsg')){$element.data('$fpValidationMsg').remove();$element.data('$fpValidationMsg',null)}
if($element.data('validMsg')&&($form.data('showValidMsg')||$element.data('showValidMsg'))){$subtext=$subtext?$subtext:createStateMsg().appendTo($wrap);if($form.data('jsShowStateIcons')){$icon=($icon?$icon:jQuery($form.data('validIcon')||'<i class="fa fa-check"></i>')).appendTo($subtext)}
if($form.data('jsHighlightStateMsg')||$element.data('jsHighlightStateMsg')){$subtext.addClass('p-valid-text')}else if($icon){$icon.addClass('p-valid-text')}
$element.data('$fpValidationMsg',$subtext)}else if(!$subtext.html()){$subtext.remove()}},errorPlacement:function(error,element){var
$element=jQuery(element),$error=jQuery(error),$wrap=$element.closest(formsPlus.selectors.validationWrap),$subtext=($wrap.find('.p-validation-state').length?$wrap.find('.p-validation-state'):createStateMsg().appendTo($wrap)),$icon=$element.data('errorIcon')?jQuery($element.data('errorIcon')).appendTo($subtext):!1;if($element.data('$fpValidationMsg')){$element.data('$fpValidationMsg').remove()}
$element.data('$fpValidationMsg',$error);if(!$icon&&$form.data('jsShowStateIcons')){$icon=jQuery($form.data('errorIcon')||'<i class="fa fa-times"></i>').appendTo($subtext)}
$subtext.append($error);if($form.data('jsHighlightStateMsg')||$element.data('jsHighlightStateMsg')){$subtext.addClass('p-error-text')}else if($icon){$icon.addClass('p-error-text')}},submitHandler:function(form){var $form=jQuery(form);$form.off('fpGeneralCheck.fpValidate');if(jQuery().fpAjaxSubmit&&$form.is('[data-js-ajax-form]')){$form.fpAjaxSubmit();var jqXHR=$form.data('jqxhr');if(!jqXHR){$form.on('fpGeneralCheck.fpValidate',function(e,dfds){dfds.push(jQuery.Deferred().resolve('validation'))})}}else{if(formsPlus.appendCaptchaHash){formsPlus.appendCaptchaHash($form)}
form.submit();setTimeout(function(){$form.find('.'+formsPlus.css.removeAfterSend).remove()})}},invalidHandler:function(event,validator){$form.trigger('fpValidationFailed',[validator]);$form.off('fpGeneralCheck.fpValidate').on('fpGeneralCheck.fpValidate',function(e,dfds){dfds.push(jQuery.Deferred().reject('validation'))})}})});return this};formsPlus.initFn.push(function($container){if(!$container.closest('form[data-js-validate]').length){$container.find('form[data-js-validate]').fpValidate()}
$container.find('[data-js-validation-block]').off('.fpValidate').on('fpGeneralCheck.fpValidate',function(e,dfds){e.stopPropagation();var dfd=jQuery.Deferred(),valid=!0;dfds.push(dfd);jQuery(this).find(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], "+"[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], "+"[type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], "+"[type='radio'], [type='checkbox']").each(function(i,$el){if(!jQuery($el).valid()){valid=!1}});if(valid){dfd.resolve('validation')}else{dfd.reject('validation')}})})}